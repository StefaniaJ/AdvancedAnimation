"use strict";function loadPage(){loadPath(),observeScrolling()}function loadPath(){fetch("svg/path.svg").then(e=>e.text()).then(e=>{document.querySelector(".timeline").innerHTML=e,drawPath(document.querySelector(".timeline").querySelector("svg"))})}function drawPath(e){let t=e.querySelector("#path"),o=t.getTotalLength();t.style.strokeDasharray=o+" "+o,t.style.strokeDashoffset=o,window.addEventListener("scroll",(function(e){let n=(document.documentElement.scrollTop+document.body.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight),s=o*n;t.style.strokeDashoffset=o-s}))}window.addEventListener("DOMContentLoaded",loadPage);const myJSON="https://spreadsheets.google.com/feeds/list/1J--43pnvHQJ8P7i_Nd-rb-iC2312s7fKEiTOyMslAFM/od6/public/values?alt=json",description=document.querySelector(".description");let myAudio=new Audio;const infoBtn=document.querySelector("#info-btn"),allSections=document.querySelectorAll(".model-section");let options={root:null,threshold:.5},observer=new IntersectionObserver(callback,options);function callback(e){e.forEach(e=>{e.isIntersecting&&(loadcurtainsSVG(),description.classList.add("show"),showDetails(e.target.dataset.decade),volumeDown(),playSong(e.target.dataset.decade))})}function loadcurtainsSVG(){fetch("svg/curtains.svg").then(e=>e.text()).then(e=>{document.querySelector("#Layer_1").innerHTML=e})}const textOptions={root:null,threshold:0},textObserver=new IntersectionObserver((function(e){e.forEach(e=>{description.classList.remove("show"),document.querySelector(".years a[data-text='"+e.target.dataset.decade+"']").classList.remove("glow"),closecurtainsSVG(),volumeDown()})}),textOptions);function closecurtainsSVG(){fetch("svg/closecurtains.svg").then(e=>e.text()).then(e=>{document.querySelector("#Layer_1").innerHTML=e})}function observeScrolling(){allSections.forEach(e=>{observer.observe(e),textObserver.observe(e)})}function showDetails(e){const t=document.querySelector(".modal-bg");function o(o){o.gsx$year.$t===e&&(description.querySelector(".year").textContent=o.gsx$year.$t,description.querySelector(".year").style.fontFamily=o.gsx$font.$t,description.querySelector(".text").textContent=o.gsx$description.$t,document.querySelector(".containerB #girl1").src=o.gsx$outfit.$t,description.querySelector(".info-link").textContent=o.gsx$info.$t,t.querySelector(".year").textContent=o.gsx$year.$t,t.querySelector(".year").style.fontFamily=o.gsx$font.$t,t.querySelector(".text").textContent=o.gsx$description.$t)}document.querySelector(".years a[data-text='"+e+"']").classList.add("glow"),fetch(myJSON).then(e=>e.json()).then(e=>e.feed.entry.forEach(o)),infoBtn.addEventListener("click",(function(){window.open(description.querySelector(".info-link").textContent,"","width=1000,height=500,top=200,left=100")})),fetch("svg/ornament.svg").then(e=>e.text()).then(e=>{document.querySelector(".description .decoration").innerHTML=e}),document.querySelector(".close").addEventListener("click",()=>t.style.display="none"),document.querySelector("#read-btn").addEventListener("click",(function(){t.style.display="block"}))}const songBtn=document.querySelector("#music-btn");function playSong(e){(myAudio=new Audio("audio/"+e+".mp3")).volume=1,myAudio.play(),songBtn.classList.add("zoomIn"),songBtn.addEventListener("click",volumeDown)}function volumeUp(){myAudio.volume=1,songBtn.classList.add("zoomIn"),songBtn.removeEventListener("click",volumeUp),songBtn.addEventListener("click",volumeDown)}function volumeDown(){myAudio.volume=0,songBtn.classList.remove("zoomIn"),songBtn.removeEventListener("click",volumeDown),songBtn.addEventListener("click",volumeUp)}
